# TransformerViz 说明书

## 一：初识Transformer
### 1.1 什么是Transformer？
想象你在读一本小说：
- **传统方法**：只能逐字逐句阅读（像早期的AI模型，比如RNN）
- **Transformer方法**：可以同时看到全书内容，用彩色笔标出重要关联（这就是注意力机制）

### 1.2 核心部件
#### 编码器（理解者）
- 任务：深入理解输入文字（如中文句子）
- 工作方式：反复分析词语之间的关系（通常有6-12层分析）

#### 解码器（创造者）
- 任务：根据理解生成新内容（如翻译成英文）
- 特殊技能：生成时不会偷看后面的答案（通过look ahead mask实现）

### 1.3 注意力机制详解
#### 基础版注意力
假设分析句子"猫吃鱼"：
- 当看到"吃"时，会同时关注"猫"（谁在吃）和"鱼"（吃什么）
- 每个词对其他词的关注程度用"注意力权重"表示（0-100%）

#### 多头注意力（团队协作）
- 相当于多个注意力机制（称为“头”）同时分析同一句话
- 每个"头"关注不同方面（下面的例子只是为了便于理解，实际工作的时候不一定能明确说出每个头在干什么）：
  - 头1：分析"谁对谁做了什么"（语法）
  - 头2：寻找"同义词替换"可能性
  - 头3：捕捉"情感倾向"...

---

## 二：关键概念
### 2.1 层（Layer）—— 思考的深度
- （同样，下面的例子只是为了便于理解，不代表实际工作情况）
- **第一层**：识别基础信息（如词性：名词/动词）
- **中间层**：建立短语关系（如"黑猫"是一个整体）
- **最后一层**：理解整体含义（推断"猫可能饿了"）

### 2.2 注意力类型对比
| 类型                  | 作用                          | 比喻                     |
|-----------------------|-----------------------------|---------------------------|
| 编码器自注意力         | 理解输入句子内部关系          | 做阅读理解是参考全文          |
| 解码器自注意力         | 生成时保证逻辑连贯            | 写作文时只能参考已写内容       |
| 编码器-解码器注意力    | 连接输入与输出                | 翻译时对照原文写译文          |

### 2.3 Look Ahead Mask 的必要性
#### 没有mask会怎样？
假设要生成"I love ___"：
- 训练的时候，模型提前看到后面的"you"就会直接填空，失去预测能力
- 就像考试时提前看到答案，无法检测真实水平

#### Mask的作用原理
- 生成第3个词时：
- 允许查看： [I, love, ? ]
- 禁止查看： [I, love, you]

通过遮挡后续内容，强制模型逐步推理

---

## 三：操作指南
### 3.1 界面地图
- 左侧： 模型列表 → 选择不同AI“大脑”
- 右侧
  - 上方： 控制台 → 调整观察视角
  - 中间： 输入框 → 输入要分析的句子
  - 下方： 可视化 → 点击即可显示AI的"注意力焦点"


### 3.2 控制台详解
#### AttentionPos（观察模式）
- **Encoder模式**：看AI如何理解输入句子
- **Decoder模式**：看AI如何逐词生成（注意遮挡效果）
- **Encoder-Decoder模式**：看翻译/问答时的跨语言关注

#### LayerMixOption（深度调节）
- **First**：看典型特征（推荐）
- **Final**：看深层含义（不推荐，在模型变深的过程中，信息会抽象成人类难以理解的样子）
- **Average**：综合各层观察（同样不推荐）

#### HeadMixOption（专家视角）
- **All**：同时显示所有“专家”观点（推荐）
- **First**：只看第一个“专家”（没啥用，不如All模式）
- **Average**：综合“专家”意见（不推荐，几乎保留不了什么信息）

#### Temperature（聚焦强度/探索欲望）
- 低温（0.1）："聚光灯"效果，突出最关键联系，此时AI的探索欲望弱，也就是“不想瞎猜”
- 高温（5.0）："散光灯"效果，显示广泛关联，此时AI的探索欲望强
- 建议：不要设置超过 1 的值

---

## 遇到问题怎么办？
- 如果：点击后没有反应 → 检查：输入是否过长？尝试短句子
- 如果：注意力分布全灰 → 尝试：调低Temperature值
- 如果：某些模型选项不可用 → 提示：不同AI能力不同，可切换模型尝试
- 如果：程序崩溃或遇到其他异常 → 提交 issue，等待修复
